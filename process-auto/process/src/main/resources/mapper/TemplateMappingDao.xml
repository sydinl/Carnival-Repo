<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.carnival.dao.TemplateMappingDao">

    <resultMap type="com.carnival.domain.TemplateMapping" id="TemplateMappingResult">
        <id     property="myRowId"       column="my_row_id"      />
        <result property="templateName"       column="template_name"      />
        <result property="sourceField"     column="source_field"    />
        <result property="transferLogic"     column="transfer_logic"    />
        <result property="descField"        column="desc_field"        />
        <result property="filterOps"        column="filter_ops"        />
        <result property="filterCondition"        column="filter_condition"        />
    </resultMap>

    <select id="selectTemplateMappingData" parameterType="String" resultMap="TemplateMappingResult">
        select my_row_id,template_name,source_field,transfer_logic,desc_field,filter_ops,filter_condition
        from template_mapping
        where template_name = #{template_name}
    </select>

    <insert id="saveTemplateMapping" parameterType="com.carnival.domain.TemplateMapping" >
        insert into template_mapping(
            my_row_id,
            template_name,
            source_field,
            transfer_logic,
            desc_field,
            filter_ops,
            filter_condition
        )values
        <foreach collection="list" item="item" separator=",">
            (
             #{item.myRowId},
             #{item.templateName},
             #{item.sourceField},
             #{item.transferLogic},
             #{item.descField},
             #{item.filterOps},
             #{item.filterCondition}
            )
        </foreach>
    </insert>


</mapper>
